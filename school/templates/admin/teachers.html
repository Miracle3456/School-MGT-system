{% extends 'base.html' %}
{% block title %}Manage Teachers{% endblock %}
{% block content %}
  <h2>Teachers</h2>
  <p class="muted">List of teachers and assigned subjects/classes.</p>

  <table style="margin-top:12px">
    <thead>
      <tr><th>Photo</th><th>Employee ID</th><th>Name</th><th>Subjects</th><th>Classes</th></tr>
    </thead>
    <tbody>
      {% for t in teachers %}
        <tr>
          <td>
            {% if t.photo %}
              <img src="{{ t.photo.url }}" alt="{{ t.user.get_full_name }}" class="thumb" data-full="{{ t.photo.url }}" style="width:42px;height:42px;border-radius:6px;object-fit:cover;cursor:pointer;border:1px solid #e5e7eb" />
            {% else %}
              <div style="width:42px;height:42px;border-radius:6px;background:#f3f4f6;display:flex;align-items:center;justify-content:center;font-size:12px;color:#6b7280">N/A</div>
            {% endif %}
          </td>
          <td>{{ t.employee_id }}</td>
          <td>{{ t.user.get_full_name }}</td>
          <td>{% for s in t.subjects.all %}{{ s.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
          <td>{% for c in t.classes.all %}{{ c.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        </tr>
      {% empty %}
        <tr><td colspan="5" class="muted">No teachers yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h3 style="margin-top:16px">Add teacher</h3>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="action" value="add" />
    <div class="row">
      <div class="col"><label>Username</label><input name="username" required /></div>
      <div class="col"><label>Email</label><input name="email" type="email" /></div>
    </div>
    <div class="row">
      <div class="col"><label>Password</label><input name="password" type="password" required /></div>
      <div class="col"><label>Employee ID</label><input name="employee_id" required /></div>
    </div>
    <div class="row">
      <div class="col"><label>Photo</label><input name="photo" type="file" accept="image/*" /></div>
    </div>
    <div class="row">
      <div class="col"><label>First name</label><input name="first_name" required /></div>
      <div class="col"><label>Last name</label><input name="last_name" required /></div>
    </div>
    <div class="row">
      <div class="col"><label>Subjects</label>
        <select name="subjects" multiple>
          {% for s in subjects %}
            <option value="{{ s.id }}">{{ s.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col"><label>Classes</label>
        <select name="classes" multiple>
          {% for c in classes %}
            <option value="{{ c.id }}">{{ c.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div style="margin-top:12px"><button class="btn" type="submit">Add teacher</button></div>
  </form>

  <!-- Reuse modal from students page via base-level listener -->

{% endblock %}
